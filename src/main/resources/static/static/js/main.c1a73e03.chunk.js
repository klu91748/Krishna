(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{391:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){"use strict";n.r(t);var c=n(1),s=(n(125),n(2)),a=n.n(s),r=n(179),i=n.n(r),o=(n(391),n(15)),u=n(16),l=n(19),j=n(18),d=n(42),h=n(12),b=n(180),O=n(63),p=n.n(O),v=new(function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"executeBasicAuthenticationService",value:function(e,t){return p.a.get("https://krishnademo.herokuapp.com/basicauth",{headers:{authorization:this.createBasicAuthToken(e,t)}})}},{key:"executeJwtAuthenticationService",value:function(e,t){return p.a.post("https://krishnademo.herokuapp.com/authenticate",{username:e,password:t})}},{key:"createBasicAuthToken",value:function(e,t){return"Basic "+window.btoa(e+":"+t)}},{key:"registerSucecssfulLogin",value:function(e,t){sessionStorage.setItem("authenticatedUser",e),this.setupAxiosInterceptors(this.createBasicAuthToken(e,t))}},{key:"registerSucecssfulLoginForJwt",value:function(e,t){sessionStorage.setItem("authenticatedUser",e),this.setupAxiosInterceptors(this.createJWTToken(t))}},{key:"createJWTToken",value:function(e){return"Bearer "+e}},{key:"logout",value:function(){sessionStorage.removeItem("authenticatedUser")}},{key:"isUserLoggedIn",value:function(){return null!==sessionStorage.getItem("authenticatedUser")}},{key:"setupAxiosInterceptors",value:function(e){var t=this;p.a.interceptors.request.use((function(n){return t.isUserLoggedIn()&&(n.headers.authorization=e),n}))}}]),e}()),g=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return v.isUserLoggedIn()?Object(c.jsx)(h.b,Object(b.a)({},this.props)):Object(c.jsx)(h.a,{to:"/login"})}}]),n}(s.Component),m=n(96),x=n(45),f=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={username:"",password:"",hasLoginFailed:!1,showSuccessMessage:!1},c.handleChange=c.handleChange.bind(Object(x.a)(c)),c.loginClicked=c.loginClicked.bind(Object(x.a)(c)),c}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"loginClicked",value:function(){var e=this;v.executeJwtAuthenticationService(this.state.username,this.state.password).then((function(t){v.registerSucecssfulLoginForJwt(e.state.username,t.data.token),e.props.history.push("/welcome/".concat(e.state.username))})).catch((function(){e.setState({showSuccessMessage:!1}),e.setState({hasLoginFailed:!0})}))}},{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Login"}),Object(c.jsxs)("div",{className:"container",children:[this.state.hasLoginFailed&&Object(c.jsx)("div",{className:"alert alert-warning",children:"Invalid Credentials"}),this.state.showSuccessMessage&&Object(c.jsx)("div",{children:"Login successful"}),"User Name: ",Object(c.jsx)("input",{type:"text",name:"username",onChange:this.handleChange}),"Password: ",Object(c.jsx)("input",{type:"password",name:"password",onChange:this.handleChange}),Object(c.jsx)("button",{className:"btn btn-success",onClick:this.loginClicked,children:"Login"})]})]})}}]),n}(s.Component),k=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={todos:[{id:1,description:"Learn React"},{id:2,description:"Learn Angular"},{id:3,description:"Learn Java"}]},c}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"List Todos"}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"id"}),Object(c.jsx)("th",{children:"description"})]})}),Object(c.jsx)("tbody",{children:this.state.todos.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.id}),Object(c.jsx)("td",{children:e.description})]},e.id)}))})]})})]})}}]),n}(s.Component);var y=function(){return Object(c.jsx)("div",{children:"Error"})},w=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=v.isUserLoggedIn();return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark",children:[Object(c.jsx)("div",{children:"Hello"}),Object(c.jsxs)("ul",{className:"navbar-nav",children:[e&&Object(c.jsx)("li",{children:Object(c.jsx)(d.b,{className:"nav-link",to:"/welcome",children:"Home"})}),e&&Object(c.jsx)("li",{children:Object(c.jsx)(d.b,{className:"nav-link",to:"/todos",children:"Todos"})})]}),Object(c.jsxs)("ul",{className:"navbar-nav navbar-collapse justify-content-end",children:[!e&&Object(c.jsx)("li",{children:Object(c.jsx)(d.b,{className:"nav-link",to:"/login",children:"Login"})}),e&&Object(c.jsx)("li",{children:Object(c.jsx)(d.b,{className:"nav-link",to:"/logout",onClick:v.logout,children:"Logout"})})]})]})})}}]),n}(s.Component),C=Object(h.g)(w),S=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"footer",children:Object(c.jsx)("span",{className:"text-muted",children:" All Right Reserved"})})}}]),n}(s.Component),L=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"You are logged out"}),Object(c.jsx)("div",{className:"container",children:"Bye!"})]})}}]),n}(s.Component),N=new(function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"executedHelloWorldService",value:function(){return p.a.get("http://localhost:8080/hello")}}]),e}()),I=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={welcomeMessage:""},c.retrieveWelcomeMessage=c.retrieveWelcomeMessage.bind(Object(x.a)(c)),c.handleSuccessfulResponse=c.handleSuccessfulResponse.bind(Object(x.a)(c)),c.handleError=c.handleError.bind(Object(x.a)(c)),c}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Welcome!"}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{children:[this.props.match.params.name,". You can manage your todos ",Object(c.jsx)(d.b,{to:"/todos",children:"here"})]})}),Object(c.jsx)("div",{className:"container",children:this.state.welcomeMessage})]})}},{key:"retrieveWelcomeMessage",value:function(){var e=this;N.executeHelloWorldService().then((function(t){return e.handleSuccessfulResponse(t)})).catch((function(t){return e.handleError(t)}))}},{key:"handleSuccessfulResponse",value:function(e){this.setState({welcomeMessage:e.data.message})}},{key:"handleError",value:function(e){console.log(e.response.data),this.setState({welcomeMessage:e.response.data.message})}}]),n}(s.Component),A=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"TodoApp",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(C,{}),Object(c.jsxs)(h.d,{children:[Object(c.jsx)(h.b,{path:"/",exact:!0,component:f}),Object(c.jsx)(h.b,{path:"/login",component:f}),Object(c.jsx)(g,{path:"/welcome",component:I}),Object(c.jsx)(g,{path:"/todos",component:k}),Object(c.jsx)(h.b,{path:"/logout",component:L}),Object(c.jsx)(h.b,{component:y})]}),Object(c.jsx)(S,{})]})})}}]),n}(s.Component),T=(n(414),n(415),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(A,{})})}}]),n}(s.Component)),M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,417)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),M()}},[[416,1,2]]]);
//# sourceMappingURL=main.c1a73e03.chunk.js.map